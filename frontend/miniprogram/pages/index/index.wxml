<!-- pages/index/index.wxml -->
<view class="container">
  <!-- 轮播图 -->
  <swiper class="banner-swiper" indicator-dots autoplay circular>
    <swiper-item wx:for="{{banners}}" wx:key="id">
      <image src="{{item.image}}" class="banner-image" mode="aspectFill"></image>
    </swiper-item>
  </swiper>

  <!-- 分类导航 -->
  <view class="category-nav">
    <view class="category-item" wx:for="{{categories}}" wx:key="id" bindtap="onCategoryTap" data-id="{{item.id}}">
      <image src="{{item.icon}}" class="category-icon"></image>
      <text class="category-name">{{item.name}}</text>
    </view>
  </view>

  <!-- 推荐菜品 -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">推荐菜品</text>
      <text class="section-more" bindtap="onMoreDishTap">更多 ></text>
    </view>
    <view class="dish-list">
      <view class="dish-item card" wx:for="{{recommendDishes}}" wx:key="id" bindtap="onDishTap" data-id="{{item.id}}">
        <image src="{{item.image}}" class="dish-image"></image>
        <view class="dish-info">
          <text class="dish-name">{{item.dishName}}</text>
          <text class="dish-desc text-ellipsis">{{item.description}}</text>
          <view class="dish-bottom">
            <view class="price">
              <text class="price-symbol">¥</text>
              <text class="price-integer">{{item.price}}</text>
            </view>
            <view class="dish-sales">已售{{item.saleCount}}</view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 附近门店 -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">附近门店</text>
      <text class="section-more" bindtap="onMoreStoreTap">更多 ></text>
    </view>
    <view class="store-list">
      <view class="store-item card" wx:for="{{stores}}" wx:key="id" bindtap="onStoreTap" data-id="{{item.id}}">
        <image src="{{item.images[0]}}" class="store-image"></image>
        <view class="store-info">
          <text class="store-name">{{item.storeName}}</text>
          <view class="store-tags">
            <text class="tag tag-primary" wx:for="{{item.tagList}}" wx:key="index" wx:for-item="tag">{{tag}}</text>
          </view>
          <view class="store-meta">
            <text class="store-rating">⭐ {{item.rating}}</text>
            <text class="store-price">人均¥{{item.avgPrice}}</text>
            <text class="store-address">{{item.address}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
