<view class="container">
  <!-- ä¼˜æƒ åˆ¸çŠ¶æ€ç­›é€‰ -->
  <view class="status-filter">
    <view class="status-item {{currentStatus === index ? 'active' : ''}}" wx:for="{{couponStatus}}" wx:key="index" bindtap="onStatusChange" data-index="{{index}}">
      <text class="status-text">{{item}}</text>
    </view>
  </view>

  <!-- ä¼˜æƒ åˆ¸åˆ—è¡¨ -->
  <view class="coupons-list">
    <view class="coupon-item" wx:for="{{coupons}}" wx:key="id">
      <!-- ä¼˜æƒ åˆ¸å¤´éƒ¨ -->
      <view class="coupon-header">
        <text class="coupon-name">{{item.couponName}}</text>
        <text class="coupon-status" wx:if="{{item.status === 0}}">æœªä½¿ç”¨</text>
        <text class="coupon-status used" wx:elif="{{item.status === 1}}">å·²ä½¿ç”¨</text>
        <text class="coupon-status expired" wx:elif="{{item.status === 2}}">å·²è¿‡æœŸ</text>
      </view>

      <!-- ä¼˜æƒ åˆ¸å†…å®¹ -->
      <view class="coupon-content">
        <view class="coupon-discount">
          <text class="discount-value">
            {{item.couponType === 'æŠ˜æ‰£åˆ¸' ? (item.discount/10) : item.discount}}
          </text>
          <text class="discount-unit">
            {{item.couponType === 'æŠ˜æ‰£åˆ¸' ? 'æŠ˜' : 'å…ƒ'}}
          </text>
        </view>
        <view class="coupon-info">
          <text class="coupon-type">{{item.couponType}}</text>
          <text class="coupon-condition">
            {{item.minAmount > 0 ? 'æ»¡' + item.minAmount + 'å…ƒå¯ç”¨' : 'æ— é—¨æ§›ä½¿ç”¨'}}
          </text>
          <text class="coupon-date">æœ‰æ•ˆæœŸï¼š{{item.startDate}} - {{item.endDate}}</text>
        </view>
        <button class="coupon-button" bindtap="onUseCoupon" data-id="{{item.id}}" wx:if="{{item.status === 0}}">
          ç«‹å³ä½¿ç”¨
        </button>
        <view class="coupon-button disabled" wx:else>
          {{item.status === 1 ? 'å·²ä½¿ç”¨' : 'å·²è¿‡æœŸ'}}
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºä¼˜æƒ åˆ¸æç¤º -->
  <view class="empty-coupons" wx:if="{{coupons.length === 0 && !loading}}">
    <view class="empty-icon">ğŸ«</view>
    <text class="empty-text">æš‚æ— ä¼˜æƒ åˆ¸</text>
  </view>
</view>