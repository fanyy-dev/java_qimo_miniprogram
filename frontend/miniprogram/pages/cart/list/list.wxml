<view class="container">
  <!-- ç™»å½•æç¤º -->
  <view class="login-prompt" wx:if="{{!isLoggedIn}}">
    <view class="prompt-content">
      <view class="prompt-icon">ğŸ›’</view>
      <view class="prompt-text">ç™»å½•åæŸ¥çœ‹è´­ç‰©è½¦</view>
      <button class="login-btn" bindtap="goToLogin">ç™»å½•</button>
    </view>
  </view>

  <!-- è´­ç‰©è½¦åˆ—è¡¨ -->
  <view class="cart-content" wx:else>
    <!-- å…¨é€‰å’Œæ¸…ç©º -->
    <view class="cart-header" wx:if="{{cartItems.length > 0}}">
      <view class="select-all" bindtap="toggleSelectAll">
        <image class="checkbox" src="{{isAllSelected ? '/images/common/checkbox-checked.png' : '/images/common/checkbox-unchecked.png'}}" mode="aspectFit"></image>
        <text class="select-all-text">å…¨é€‰</text>
      </view>
      <view class="clear-cart" bindtap="clearCart">æ¸…ç©ºè´­ç‰©è½¦</view>
    </view>

    <!-- è´­ç‰©è½¦å•†å“åˆ—è¡¨ -->
    <view class="cart-list" wx:if="{{cartItems.length > 0}}">
      <view class="cart-item" wx:for="{{cartItems}}" wx:key="id">
        <!-- é€‰æ‹©æ¡† -->
        <view class="item-select" bindtap="toggleSelect" data-id="{{item.id}}">
          <image class="checkbox" src="{{item.selected ? '/images/common/checkbox-checked.png' : '/images/common/checkbox-unchecked.png'}}" mode="aspectFit"></image>
        </view>

        <!-- å•†å“å›¾ç‰‡ -->
        <image class="item-image" src="{{item.image || '/images/common/icon_search.png'}}" mode="aspectFill"></image>

        <!-- å•†å“ä¿¡æ¯ -->
        <view class="item-info">
          <view class="item-name">{{item.dishName}}</view>
          <view class="item-desc">{{item.description || 'æš‚æ— æè¿°'}}</view>
          <view class="item-bottom">
            <view class="item-price">Â¥{{item.price}}</view>
            <view class="quantity-controls">
              <view class="quantity-btn minus" bindtap="decreaseQuantity" data-id="{{item.id}}">-</view>
              <view class="quantity-value">{{item.quantity}}</view>
              <view class="quantity-btn plus" bindtap="increaseQuantity" data-id="{{item.id}}">+</view>
            </view>
          </view>
        </view>

        <!-- åˆ é™¤æŒ‰é’® -->
        <view class="item-delete" bindtap="removeItem" data-id="{{item.id}}">
          <image class="delete-icon" src="/images/common/icon_delete.png" mode="aspectFit"></image>
        </view>
      </view>
    </view>

    <!-- ç©ºè´­ç‰©è½¦ -->
    <view class="empty-cart" wx:else>
      <view class="empty-icon">ğŸ›’</view>
      <view class="empty-text">è´­ç‰©è½¦æ˜¯ç©ºçš„</view>
      <button class="go-shopping-btn" bindtap="goShopping">å»é€›é€›</button>
    </view>

    <!-- ç»“ç®—æ  -->
    <view class="checkout-bar" wx:if="{{cartItems.length > 0 && selectedCount > 0}}">
      <view class="total-info">
        <view class="total-text">åˆè®¡ï¼š</view>
        <view class="total-price">Â¥{{totalPrice}}</view>
      </view>
      <view class="checkout-btn" bindtap="checkout">
        ç»“ç®—({{selectedCount}})
      </view>
    </view>
  </view>
</view>