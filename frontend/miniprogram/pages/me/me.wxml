<view class="container">
  <!-- æ¸¸å®¢æ¨¡å¼æç¤º -->
  <view class="guest-mode" wx:if="{{!isLoggedIn && isGuestMode}}">
    <view class="guest-notice">å½“å‰ä¸ºæ¸¸å®¢æ¨¡å¼ï¼Œéƒ¨åˆ†åŠŸèƒ½å—é™</view>
    <view class="guest-actions">
      <button class="login-btn" bindtap="onQuickLogin">å¾®ä¿¡ä¸€é”®ç™»å½•</button>
      <button class="login-btn-outline" bindtap="onAccountLogin">è´¦å·å¯†ç ç™»å½•</button>
    </view>
  </view>

  <!-- æœªç™»å½•çŠ¶æ€ -->
  <view class="login-prompt" wx:if="{{!isLoggedIn && !isGuestMode}}">
    <view class="login-avatar">
      <view class="avatar-placeholder">æœª</view>
    </view>
    <view class="login-text">æœªç™»å½•</view>
    <view class="login-actions">
      <button class="login-btn" bindtap="onQuickLogin">å¾®ä¿¡ä¸€é”®ç™»å½•</button>
      <button class="login-btn-outline" bindtap="onAccountLogin">è´¦å·å¯†ç ç™»å½•</button>
      <button class="guest-btn" bindtap="onGuestMode">æ¸¸å®¢æ¨¡å¼</button>
    </view>
  </view>

  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸï¼ˆå·²ç™»å½•ï¼‰ -->
  <view class="user-info" wx:if="{{isLoggedIn}}">
    <view class="avatar">
      <image src="{{userInfo.avatar || '/images/common/default-avatar.png'}}" class="avatar-img"></image>
    </view>
    <view class="user-details">
      <view class="username-row">
        <view class="username">{{userInfo.nickname || userInfo.username || 'ç”¨æˆ·'}}</view>
        <view class="member-level {{userInfo.memberLevel || 'NORMAL'}}">{{memberLevelText}}</view>
      </view>
      <view class="growth-info">
        <view class="growth-value">æˆé•¿å€¼: {{userInfo.growthValue || 0}}</view>
        <view class="points">ç§¯åˆ†: {{userInfo.points || 0}}</view>
      </view>
      <view class="taste-preference" wx:if="{{userInfo.tastePreference}}">
        <text>å£å‘³åå¥½: {{userInfo.tastePreference}}</text>
      </view>
    </view>
    <view class="arrow" bindtap="onEditProfile">
      <view class="arrow-text">></view>
    </view>
  </view>

  <!-- ä¼šå‘˜æƒç›Šæç¤º -->
  <view class="member-benefits" wx:if="{{isLoggedIn}}">
    <view class="benefits-title">ä¼šå‘˜æƒç›Š</view>
    <view class="benefits-list">
      <view class="benefit-item" wx:for="{{memberBenefits}}" wx:key="index">
        <view class="benefit-icon">{{item.icon}}</view>
        <view class="benefit-text">{{item.text}}</view>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå•åŒºåŸŸ -->
  <view class="menu-section">
    <view class="menu-item" bindtap="onMyOrders">
      <view class="menu-icon">
        <view class="icon-text">ğŸ“‹</view>
      </view>
      <view class="menu-text">æˆ‘çš„è®¢å•</view>
      <view class="order-status-badges" wx:if="{{isLoggedIn}}">
        <view class="status-badge pending" wx:if="{{pendingOrderCount > 0}}">
          <text>{{pendingOrderCount}}</text>
        </view>
        <view class="status-badge processing" wx:if="{{processingOrderCount > 0}}">
          <text>{{processingOrderCount}}</text>
        </view>
        <view class="status-badge completed" wx:if="{{completedOrderCount > 0}}">
          <text>{{completedOrderCount}}</text>
        </view>
        <view class="status-badge canceled" wx:if="{{canceledOrderCount > 0}}">
          <text>{{canceledOrderCount}}</text>
        </view>
      </view>
      <view class="menu-arrow">
        <view class="arrow-text">></view>
      </view>
    </view>

    <view class="menu-item" bindtap="onBrowseHistory">
      <view class="menu-icon">
        <view class="icon-text">ğŸ“–</view>
      </view>
      <view class="menu-text">æµè§ˆå†å²</view>
      <view class="menu-arrow">
        <view class="arrow-text">></view>
      </view>
    </view>

    <view class="menu-item" bindtap="onMyAddress">
      <view class="menu-icon">
        <view class="icon-text">ğŸ“</view>
      </view>
      <view class="menu-text">æ”¶è´§åœ°å€</view>
      <view class="menu-arrow">
        <view class="arrow-text">></view>
      </view>
    </view>

    <view class="menu-item" bindtap="onMyCoupons">
      <view class="menu-icon">
        <view class="icon-text">ğŸ«</view>
      </view>
      <view class="menu-text">æˆ‘çš„ä¼˜æƒ åˆ¸</view>
      <view class="menu-badge" wx:if="{{couponCount > 0}}">{{couponCount}}</view>
      <view class="menu-arrow">
        <view class="arrow-text">></view>
      </view>
    </view>

    <view class="menu-item" bindtap="onMyFavorites">
      <view class="menu-icon">
        <view class="icon-text">â¤ï¸</view>
      </view>
      <view class="menu-text">æˆ‘çš„æ”¶è—</view>
      <view class="menu-arrow">
        <view class="arrow-text">></view>
      </view>
    </view>

    <view class="menu-item" bindtap="onPointsMall">
      <view class="menu-icon">
        <view class="icon-text">ğŸ†</view>
      </view>
      <view class="menu-text">ç§¯åˆ†å•†åŸ</view>
      <view class="menu-arrow">
        <view class="arrow-text">></view>
      </view>
    </view>
  </view>

  <!-- ç³»ç»Ÿè®¾ç½®åŒºåŸŸ -->
  <view class="menu-section">
    <view class="menu-item" bindtap="onSettings">
      <view class="menu-icon">
        <view class="icon-text">âš™ï¸</view>
      </view>
      <view class="menu-text">è®¾ç½®</view>
      <view class="menu-arrow">
        <view class="arrow-text">></view>
      </view>
    </view>

    <view class="menu-item" bindtap="onMessages">
      <view class="menu-icon">
        <view class="icon-text">ğŸ’¬</view>
      </view>
      <view class="menu-text">æ¶ˆæ¯ä¸­å¿ƒ</view>
      <view class="menu-badge" wx:if="{{messageCount > 0}}">{{messageCount}}</view>
      <view class="menu-arrow">
        <view class="arrow-text">></view>
      </view>
    </view>

    <view class="menu-item" bindtap="onAbout">
      <view class="menu-icon">
        <view class="icon-text">â„¹ï¸</view>
      </view>
      <view class="menu-text">å…³äºæˆ‘ä»¬</view>
      <view class="menu-arrow">
        <view class="arrow-text">></view>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½•æŒ‰é’® -->
  <view class="logout-section" wx:if="{{isLoggedIn}}">
    <button class="logout-btn" bindtap="onLogout" type="warn">é€€å‡ºç™»å½•</button>
  </view>
</view>