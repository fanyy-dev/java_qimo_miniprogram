<view class="container">
  <view class="header">
    <view class="header-title">æ¶ˆæ¯ä¸­å¿ƒ</view>
    <view class="header-actions">
      <text class="mark-all-read" bindtap="onMarkAllRead">å…¨éƒ¨æ ‡ä¸ºå·²è¯»</text>
      <text class="delete-all" bindtap="onDeleteAll">æ¸…ç©ºæ¶ˆæ¯</text>
    </view>
  </view>

  <view class="message-tabs">
    <view 
      class="tab-item {{currentTab === 'all' ? 'active' : ''}}" 
      data-tab="all" 
      bindtap="onTabChange"
    >
      å…¨éƒ¨
      <view class="tab-badge" wx:if="{{allCount > 0}}">{{allCount}}</view>
    </view>
    <view 
      class="tab-item {{currentTab === 'order' ? 'active' : ''}}" 
      data-tab="order" 
      bindtap="onTabChange"
    >
      è®¢å•
      <view class="tab-badge" wx:if="{{orderCount > 0}}">{{orderCount}}</view>
    </view>
    <view 
      class="tab-item {{currentTab === 'promotion' ? 'active' : ''}}" 
      data-tab="promotion" 
      bindtap="onTabChange"
    >
      ä¿ƒé”€
      <view class="tab-badge" wx:if="{{promotionCount > 0}}">{{promotionCount}}</view>
    </view>
    <view 
      class="tab-item {{currentTab === 'member' ? 'active' : ''}}" 
      data-tab="member" 
      bindtap="onTabChange"
    >
      ä¼šå‘˜
      <view class="tab-badge" wx:if="{{memberCount > 0}}">{{memberCount}}</view>
    </view>
  </view>

  <view class="message-list">
    <view 
      class="message-item {{item.read ? '' : 'unread'}}" 
      wx:for="{{filteredMessages}}" 
      wx:key="id"
      data-id="{{item.id}}"
      bindtap="onMessageTap"
    >
      <view class="message-icon">
        <view class="icon-wrapper {{item.type}}">
          <view class="icon-text">{{getMessageIcon(item.type)}}</view>
        </view>
      </view>
      <view class="message-content">
        <view class="message-title-row">
          <view class="message-title">{{item.title}}</view>
          <view class="message-time">{{formatTime(item.createTime)}}</view>
        </view>
        <view class="message-desc">{{item.content}}</view>
      </view>
      <view class="message-actions">
        <text class="mark-read" wx:if="{{!item.read}}" bindtap="onMarkRead" data-id="{{item.id}}">æ ‡ä¸ºå·²è¯»</text>
        <text class="delete" bindtap="onDelete" data-id="{{item.id}}">åˆ é™¤</text>
      </view>
    </view>

    <view class="empty-state" wx:if="{{filteredMessages.length === 0}}">
      <view class="empty-icon">ğŸ“­</view>
      <view class="empty-text">æš‚æ— æ¶ˆæ¯</view>
    </view>
  </view>
</view>